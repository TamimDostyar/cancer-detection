{% extends "base.html" %}

{% block content %}
<div class="columns is-centered">
    <div class="column is-half">
        <div class="box">
            <h1 class="title has-text-centered">Upload Medical Image</h1>
            <div class="content mb-4">
                <p class="has-text-centered">This system can detect the following conditions:</p>
                <ul>
                    <li>Lung Adenocarcinoma</li>
                    <li>Lung Benign Tissue (Normal)</li>
                    <li>Lung Squamous Cell Carcinoma</li>
                    <li>Colon Adenocarcinoma</li>
                    <li>Colon Benign Tissue (Normal)</li>
                </ul>
            </div>
            <form action="{{ url_for('predict') }}" method="post" enctype="multipart/form-data">
                <div class="file has-name is-fullwidth">
                    <label class="file-label">
                        <input class="file-input" type="file" name="file" accept=".png,.jpg,.jpeg">
                        <span class="file-cta">
                            <span class="file-icon">
                                <i class="fas fa-upload"></i>
                            </span>
                            <span class="file-label">
                                Choose a file...
                            </span>
                        </span>
                        <span class="file-name">
                            No file selected
                        </span>
                    </label>
                </div>
                <div class="field mt-4">
                    <div class="control">
                        <button class="button is-primary is-fullwidth" type="submit">
                            <span class="icon">
                                <i class="fas fa-search"></i>
                            </span>
                            <span>Analyze Image</span>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    const fileInput = document.querySelector('.file-input');
    const fileLabel = document.querySelector('.file-name');

    fileInput.addEventListener('change', () => {
        if (fileInput.files.length > 0) {
            fileLabel.textContent = fileInput.files[0].name;
        } else {
            fileLabel.textContent = 'No file selected';
        }
    });
</script>
{% endblock %}